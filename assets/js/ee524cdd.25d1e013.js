"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[13764],{50589:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>l,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var t=r(85893),o=r(11151);const i={title:"Tag 11",tags:["M141","Tag 11","MongoDB","Import/Export/Backup/Restore und Queries"]},s="Tag 11",a={id:"M141/tag-0011",title:"Tag 11",description:"1 Dokumentationsauftr\xe4ge",source:"@site/docs/M141/tag-0011.md",sourceDirName:"M141",slug:"/M141/tag-0011",permalink:"/docs/M141/tag-0011",draft:!1,unlisted:!1,tags:[{label:"M141",permalink:"/docs/tags/m-141"},{label:"Tag 11",permalink:"/docs/tags/tag-11"},{label:"MongoDB",permalink:"/docs/tags/mongo-db"},{label:"Import/Export/Backup/Restore und Queries",permalink:"/docs/tags/import-export-backup-restore-und-queries"}],version:"current",frontMatter:{title:"Tag 11",tags:["M141","Tag 11","MongoDB","Import/Export/Backup/Restore und Queries"]},sidebar:"tutorialSidebar",previous:{title:"Tag 10",permalink:"/docs/M141/tag-0010"},next:{title:"Tag 12",permalink:"/docs/M141/tag-0012"}},d={},c=[{value:"1 Dokumentationsauftr\xe4ge",id:"1-dokumentationsauftr\xe4ge",level:2},{value:"1.1 Dokumentation zur \xdcbung &quot;Import/Export/Backup/Restore und Queries&quot;",id:"11-dokumentation-zur-\xfcbung-importexportbackuprestore-und-queries",level:3},{value:"1.1.1 Import",id:"111-import",level:4},{value:"1.1.2 Queries",id:"112-queries",level:4},{value:"1.1.3 Aggregate",id:"113-aggregate",level:4},{value:"1.1.4 Sort",id:"114-sort",level:4},{value:"1.1.5 Backup und Restore",id:"115-backup-und-restore",level:4}];function u(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"tag-11",children:"Tag 11"}),"\n",(0,t.jsx)(n.h2,{id:"1-dokumentationsauftr\xe4ge",children:"1 Dokumentationsauftr\xe4ge"}),"\n",(0,t.jsx)(n.h3,{id:"11-dokumentation-zur-\xfcbung-importexportbackuprestore-und-queries",children:'1.1 Dokumentation zur \xdcbung "Import/Export/Backup/Restore und Queries"'}),"\n",(0,t.jsx)(n.h4,{id:"111-import",children:"1.1.1 Import"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{target:"_blank",href:r(62643).Z+"",children:"Mongo Cities 1000"})," importieren"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mongodb",children:"mongoimport --db=cities --collection=cities --file=mongo_cities1000.json\n"})}),"\n",(0,t.jsx)(n.h4,{id:"112-queries",children:"1.1.2 Queries"}),"\n",(0,t.jsx)(n.p,{children:'Listen Sie alle St\xe4dte aus der Timezone "Europa" (alle Zeitzonen von Europa) auf.'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mongodb",children:'db.cities.find({\r\n  timezone:{\r\n    $regex:"Europe"\r\n  }\r\n},\r\n{\r\n  _id:0,\r\n  name:1\r\n})\n'})}),"\n",(0,t.jsx)(n.h4,{id:"113-aggregate",children:"1.1.3 Aggregate"}),"\n",(0,t.jsx)(n.p,{children:"F\xfchren Sie die folgende Query auf Ihrer Datenbank aus:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mongodb",children:"db.cities.aggregate([\r\n    {\r\n    $match: {\r\n        'timezone': {\r\n        $eq: 'Europe/London'\r\n        }\r\n    }\r\n    },\r\n    {\r\n    $group: {\r\n        _id: 'averagePopulation',\r\n        avgPop: {\r\n        $avg: '$population'\r\n        }\r\n    }\r\n    }\r\n])\n"})}),"\n",(0,t.jsx)(n.p,{children:"Was macht die Query?"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:['Zuerst werden alle Objekte mit der Zeitzone "Europe/London" gesucht. Anschliessend wird ein Durchschnitt von der Population mit der ID ',(0,t.jsx)(n.code,{children:"averagePopulation"})," erstellt."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"114-sort",children:"1.1.4 Sort"}),"\n",(0,t.jsx)(n.p,{children:"F\xfchren Sie die folgende Query auf Ihrer Datenbank aus:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mongodb",children:"db.cities.aggregate([\r\n    {\r\n    $match: {\r\n        'timezone': {\r\n        $eq: 'Europe/London'\r\n        }\r\n    }\r\n    },\r\n    {\r\n    $sort: {\r\n        population: -1\r\n    }\r\n    },\r\n    {\r\n    $project: {\r\n        _id: 0,\r\n        name: 1,\r\n        population: 1\r\n    }\r\n    }\r\n])\n"})}),"\n",(0,t.jsx)(n.p,{children:"Was macht die Query?"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:['Zuerst werden wieder alle Objekte mit der Zeitzone "Europe/London" gesucht. Anschliessend wird die Population absteigend (',(0,t.jsx)(n.code,{children:"-1"})," = Absteigend, ",(0,t.jsx)(n.code,{children:"1"})," = Aufsteigend)"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"115-backup-und-restore",children:"1.1.5 Backup und Restore"}),"\n",(0,t.jsx)(n.p,{children:"F\xfchren Sie von Hand (oder \xfcber Bash-Script) ein Backup und ein Restore f\xfcr Ihre Testdatenbank durch"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mongodb",metastring:'title="Backup"',children:"mongodump --archive=cities.20230603.archive --db=cities\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mongodb",metastring:'title="Restore"',children:'mongorestore --archive=cities.20230603.archive --nsFrom="cities.*" --nsTo="cities2.*"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Um einen Klon in einem Befehl zu erstellen kann folgender Befehl genutzt werden."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mongodb",metastring:'title="Klon"',children:'mongodump --archive --db=cities | mongorestore --archive --nsFrom="cities.*" --nsTo="cities2.*"\n'})})]})}function l(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},62643:(e,n,r)=>{r.d(n,{Z:()=>t});const t=r.p+"assets/files/mongo_cities1000-7294115c8d5d53fa46fb288e8a0daa68.json"},11151:(e,n,r)=>{r.d(n,{Z:()=>a,a:()=>s});var t=r(67294);const o={},i=t.createContext(o);function s(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);