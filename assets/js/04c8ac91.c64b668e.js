"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[94686],{17358:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>a});var r=i(85893),t=i(11151);const l={title:"Tag 15",tags:["M239","Tag 15","Server","Docker","LAMP"]},s="Tag 15: LAMP mit Docker",c={id:"M239/tag-0015",title:"Tag 15",description:"1 \xdcbung 1",source:"@site/docs/M239/tag-0015.md",sourceDirName:"M239",slug:"/M239/tag-0015",permalink:"/docs/M239/tag-0015",draft:!1,unlisted:!1,tags:[{label:"M239",permalink:"/docs/tags/m-239"},{label:"Tag 15",permalink:"/docs/tags/tag-15"},{label:"Server",permalink:"/docs/tags/server"},{label:"Docker",permalink:"/docs/tags/docker"},{label:"LAMP",permalink:"/docs/tags/lamp"}],version:"current",frontMatter:{title:"Tag 15",tags:["M239","Tag 15","Server","Docker","LAMP"]},sidebar:"tutorialSidebar",previous:{title:"Tag 14",permalink:"/docs/M239/tag-0014"},next:{title:"Tag 16",permalink:"/docs/M239/tag-0016"}},d={},a=[{value:"1 \xdcbung 1",id:"1-\xfcbung-1",level:2},{value:"1.1 Schritt 1: Aufbauen der Struktur",id:"11-schritt-1-aufbauen-der-struktur",level:3},{value:"1.2 Schritt 2: Ports und Networks",id:"12-schritt-2-ports-und-networks",level:3},{value:"1.3 Schritt 3: Volumes",id:"13-schritt-3-volumes",level:3},{value:"1.4 Schritt 4: Konfigurationen f\xfcr die Container",id:"14-schritt-4-konfigurationen-f\xfcr-die-container",level:3},{value:"1.5 Schritt 5: Dockerfiles erstellen",id:"15-schritt-5-dockerfiles-erstellen",level:3},{value:"1.6 Schritt 6: Vorbereitung der Testumgebung",id:"16-schritt-6-vorbereitung-der-testumgebung",level:3},{value:"1.7 Schritt 7: Starten der Applikation und Testing",id:"17-schritt-7-starten-der-applikation-und-testing",level:3}];function o(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"tag-15-lamp-mit-docker",children:"Tag 15: LAMP mit Docker"}),"\n",(0,r.jsx)(n.h2,{id:"1-\xfcbung-1",children:"1 \xdcbung 1"}),"\n",(0,r.jsx)(n.h3,{id:"11-schritt-1-aufbauen-der-struktur",children:"1.1 Schritt 1: Aufbauen der Struktur"}),"\n",(0,r.jsx)(n.admonition,{title:"Auftrag",type:"note",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Erstellen Sie auf Ihrer VM ein Verzeichnis mit dem Namen ",(0,r.jsx)(n.code,{children:"dockerComposeTest"})]}),"\n",(0,r.jsxs)(n.li,{children:["Platzieren Sie darin ein ",(0,r.jsx)(n.code,{children:"docker-compose.yml"})]}),"\n",(0,r.jsx)(n.li,{children:"Erstellen Sie nun noch die Verzeichnisse apache, php und mysql."}),"\n"]})}),"\n",(0,r.jsx)(n.p,{children:"Neues Verzeichnis erstellen:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cmd",children:"mkdir dockerComposeTest\ncd dockerComposeTest\n"})}),"\n",(0,r.jsx)(n.p,{children:"docker-compose.yml erstellen:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cmd",children:"vim docker-compose.yml\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",metastring:'title="docker-compose.yml"',children:"version: \"3.0\"\n\nservices:\n  apache:\n    build: './apache'\n  php:\n    build: './php'\n  mysql:\n    build: './mysql'\n"})}),"\n",(0,r.jsx)(n.p,{children:"Apache, PHP und MySQL Verzeichnisse erstellen:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cmd",children:"mkdir apache\nmkdir php\nmkdir mysql\n"})}),"\n",(0,r.jsx)(n.h3,{id:"12-schritt-2-ports-und-networks",children:"1.2 Schritt 2: Ports und Networks"}),"\n",(0,r.jsx)(n.admonition,{title:"Auftrag",type:"note",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Erstellen Sie die Port-Weiterleitungen"}),"\n",(0,r.jsx)(n.li,{children:"Definieren Sie ein Backend und Frontend Netzwerk mit den entsprechenden Verbindungen"}),"\n"]})}),"\n",(0,r.jsx)(n.p,{children:"Port-Weiterleitung einrichten & Netzwerke definieren:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",metastring:'title="docker-compose.yml"',children:"version: \"3.0\"\n\nservices:\n  apache:\n    build: './apache'\n    ports:\n      - 8085:80\n    networks:\n      - frontend\n      - backend\n    depends_on:\n      - php\n      - mysql\n  php:\n    build: './php'\n    networks:\n      - backend\n  mysql:\n    build: './mysql'\n    networks:\n      - backend\nnetworks:\n  backend:\n  frontend:\n"})}),"\n",(0,r.jsx)(n.h3,{id:"13-schritt-3-volumes",children:"1.3 Schritt 3: Volumes"}),"\n",(0,r.jsx)(n.admonition,{title:"Auftrag",type:"note",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Mounten Sie die Webverzeichnisse in den Container apache:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"public_html"})," nach ",(0,r.jsx)(n.code,{children:"/usr/local/apache2/htdocs"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Mounten Sie die Webverzeichnisse in den Container php:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"public_html"})," nach ",(0,r.jsx)(n.code,{children:"/usr/local/apache2/htdocs"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"tmp"})," nach ",(0,r.jsx)(n.code,{children:"/usr/local/tmp"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Mounten Sie das Datenbankverzeichnis in den Container mysql:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"database"})," nach ",(0,r.jsx)(n.code,{children:"/var/lib/mysql"})]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,r.jsx)(n.p,{children:"Verzeichnisse erstellen:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cmd",children:"mkdir public_html\nmkdir tmp\nmkdir database\n"})}),"\n",(0,r.jsx)(n.p,{children:"Verzeichnisse mounten:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yml",metastring:'title="docker-compose.yml"',children:"version: \"3.0\"\n\nservices:\n  apache:\n    build: './apache'\n    ports:\n      - 8085:80\n    networks:\n      - frontend\n      - backend\n    depends_on:\n      - php\n      - mysql\n    volumes:\n      - ./public_html:/usr/local/apache2/htdocs\n  php:\n    build: './php'\n    networks:\n      - backend\n    volumes:\n      - ./public_html:/usr/local/apache2/htdocs\n      - ./tmp:/usr/local/tmp\n  mysql:\n    build: './mysql'\n    networks:\n      - backend\n    volumes:\n      - ./database:/var/lib/mysql\nnetworks:\n  backend:\n  frontend:\n"})}),"\n",(0,r.jsx)(n.h3,{id:"14-schritt-4-konfigurationen-f\xfcr-die-container",children:"1.4 Schritt 4: Konfigurationen f\xfcr die Container"}),"\n",(0,r.jsx)(n.admonition,{title:"Auftrag",type:"note",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Die Container apache und mysql m\xfcssen noch beim Erstellen definierte Konfigurationen durchlaufen. Erstellen Sie also bitte folgende Konfigrationsdateien im Verzeichnis:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Im Verzeichnis apache die Datei apache.conf erstellen"}),"\n",(0,r.jsx)(n.li,{children:"Im Verzeichnis mysql die Datei my.cnf erstellen"}),"\n",(0,r.jsx)(n.li,{children:"Im Verzeichnis php die Datei php.ini erstellen"}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/appendix/M239/docker_compose_konfigurationen#apacheapacheconf",children:"Konfiguration Apache"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/appendix/M239/docker_compose_konfigurationen#mysqlmycnf",children:"Konfiguration MySQL"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/appendix/M239/docker_compose_konfigurationen#phpphpini",children:"Konfiguration PHP"})}),"\n",(0,r.jsx)(n.h3,{id:"15-schritt-5-dockerfiles-erstellen",children:"1.5 Schritt 5: Dockerfiles erstellen"}),"\n",(0,r.jsx)(n.admonition,{title:"Auftrag",type:"note",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Damit nun alle Container nach unseren Vorstellungen gebaut werden, m\xfcssen noch f\xfcr jeden Container ein Dockerfile erstellt werden."}),"\n"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-docker",metastring:'title="./apache/Dockerfile"',children:"FROM httpd:2.4.35-alpine\nRUN apk update; \\\n    apk upgrade;\nCOPY ./apache.conf /usr/local/apache2/conf/httpd.conf\nEXPOSE 80\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-docker",metastring:'title="./mysql/Dockerfile"',children:"FROM mysql:8.0.13\nENV MYSQL_ROOT_PASSWORD <password>\nCOPY my.cnf /etc/mysql/\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-docker",metastring:'title="./php/Dockerfile"',children:"FROM php:7.3-rc-fpm-alpine\nRUN apk update; \\\n    apk upgrade;\nRUN docker-php-ext-install mysqli\nRUN apk add freetype libpng libjpeg-turbo freetype-dev libpng-dev libjpeg-turbo-dev\nRUN docker-php-ext-install -j$(nproc) iconv \nRUN docker-php-ext-configure gd --with-freetype-dir=/usr/include/ --with-jpeg-dir=/usr/include/ \nRUN docker-php-ext-install -j$(nproc) gd\nCOPY php.ini /usr/local/etc/php/php.ini\n"})}),"\n",(0,r.jsx)(n.h3,{id:"16-schritt-6-vorbereitung-der-testumgebung",children:"1.6 Schritt 6: Vorbereitung der Testumgebung"}),"\n",(0,r.jsx)(n.admonition,{title:"Auftrag",type:"note",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Erstellen Sie im Verzeichnis public_html die folgenden beiden Dateien:\nindex.html\nindex.php"}),"\n"]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/appendix/M239/docker_compose_konfigurationen#indexhtml",children:"index.html"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/appendix/M239/docker_compose_konfigurationen#indexphp",children:"index.php"})}),"\n",(0,r.jsx)(n.h3,{id:"17-schritt-7-starten-der-applikation-und-testing",children:"1.7 Schritt 7: Starten der Applikation und Testing"}),"\n",(0,r.jsx)(n.admonition,{title:"Auftrag",type:"note",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Starten Sie nun die Applikation \xfcber den geeigneten Docker-Compose-Befehl"}),"\n",(0,r.jsx)(n.li,{children:"Verifizieren Sie nun, ob die Aufrufe auf index.html und index.php von verschiedenen Containern beantwortet wird (Tip: Logging beachten!)"}),"\n"]})}),"\n",(0,r.jsx)(n.p,{children:"Docker-Compose starten:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cmd",children:"docker-compose up\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},11151:(e,n,i)=>{i.d(n,{Z:()=>c,a:()=>s});var r=i(67294);const t={},l=r.createContext(t);function s(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);