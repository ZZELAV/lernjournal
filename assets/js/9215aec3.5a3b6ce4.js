"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[34498],{50841:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>t,metadata:()=>d,toc:()=>u});var s=i(85893),r=i(11151);const t={title:"Auftrag 1",tags:["M182","Auftrag 1","Systemsicherheit implementieren","LB2","Infrastruktur aufbauen"]},a="Infrastruktur aufbauen/verstehen und dokumentieren (10%)",d={id:"M182/lb2/auftrag-0001",title:"Auftrag 1",description:"Auftrag",source:"@site/docs/M182/lb2/auftrag-0001.md",sourceDirName:"M182/lb2",slug:"/M182/lb2/auftrag-0001",permalink:"/docs/M182/lb2/auftrag-0001",draft:!1,unlisted:!1,tags:[{label:"M182",permalink:"/docs/tags/m-182"},{label:"Auftrag 1",permalink:"/docs/tags/auftrag-1"},{label:"Systemsicherheit implementieren",permalink:"/docs/tags/systemsicherheit-implementieren"},{label:"LB2",permalink:"/docs/tags/lb-2"},{label:"Infrastruktur aufbauen",permalink:"/docs/tags/infrastruktur-aufbauen"}],version:"current",frontMatter:{title:"Auftrag 1",tags:["M182","Auftrag 1","Systemsicherheit implementieren","LB2","Infrastruktur aufbauen"]},sidebar:"tutorialSidebar",previous:{title:"LB2",permalink:"/docs/M182/lb2/"},next:{title:"Auftrag 2",permalink:"/docs/M182/lb2/auftrag-0002"}},l={},u=[{value:"1 Infrastruktur-Lab",id:"1-infrastruktur-lab",level:2},{value:"1.1 Netzwerk-Diagramm mit IP-Adressen der VMs",id:"11-netzwerk-diagramm-mit-ip-adressen-der-vms",level:3},{value:"1.2 Beschreibung der beiden Windows-VMs",id:"12-beschreibung-der-beiden-windows-vms",level:3},{value:"1.2.1 Login",id:"121-login",level:4},{value:"1.2.2 Installierte Dienste (&quot;Welche Software wurde auf der VM installiert?&quot;)",id:"122-installierte-dienste-welche-software-wurde-auf-der-vm-installiert",level:4},{value:"1.2.3 Zugriffe auf die Applikationen (&quot;Wie greife ich auf die verschiedenen Softwaren zu?&quot;)",id:"123-zugriffe-auf-die-applikationen-wie-greife-ich-auf-die-verschiedenen-softwaren-zu",level:4},{value:"1.3 Beschreibung der ELK-VM",id:"13-beschreibung-der-elk-vm",level:3},{value:"1.3.1 Login",id:"131-login",level:4},{value:"1.3.2 Installierte Dienste (&quot;Welche Software wurde auf der VM installiert?&quot;)",id:"132-installierte-dienste-welche-software-wurde-auf-der-vm-installiert",level:4},{value:"1.3.3 Zugriffe auf die Applikationen (&quot;Wie greife ich auf die verschiedenen Softwaren zu?&quot;)",id:"133-zugriffe-auf-die-applikationen-wie-greife-ich-auf-die-verschiedenen-softwaren-zu",level:4},{value:"2 Infrastruktur-Setup",id:"2-infrastruktur-setup",level:2},{value:"2.1 Sinn und Zweck des Vagrantfile",id:"21-sinn-und-zweck-des-vagrantfile",level:3},{value:"2.2 Sinn und Zweck Provisioning-Befehle",id:"22-sinn-und-zweck-provisioning-befehle",level:3},{value:"2.3 Liste aller Scripts f\xfcr die Windows-Images die bei einer Installation ausgef\xfchrt werden",id:"23-liste-aller-scripts-f\xfcr-die-windows-images-die-bei-einer-installation-ausgef\xfchrt-werden",level:3},{value:"2.4 Beschreibung des bootstrap.sh-Files f\xfcr das Aufsetzen der Logger-VM",id:"24-beschreibung-des-bootstrapsh-files-f\xfcr-das-aufsetzen-der-logger-vm",level:3},{value:"2.5 Beschreibung des ELK.sh-Files f\xfcr das Aufsetzen der Logger-VM",id:"25-beschreibung-des-elksh-files-f\xfcr-das-aufsetzen-der-logger-vm",level:3}];function o(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"infrastruktur-aufbauenverstehen-und-dokumentieren-10",children:"Infrastruktur aufbauen/verstehen und dokumentieren (10%)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{target:"_blank",href:i(7228).Z+"",children:"Auftrag"})}),"\n",(0,s.jsx)(n.h2,{id:"1-infrastruktur-lab",children:"1 Infrastruktur-Lab"}),"\n",(0,s.jsx)(n.h3,{id:"11-netzwerk-diagramm-mit-ip-adressen-der-vms",children:"1.1 Netzwerk-Diagramm mit IP-Adressen der VMs"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"Netzwerk-Diagramm SVG",src:i(300).Z+"",width:"1098",height:"578"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.a,{target:"_blank",href:i(47373).Z+"",children:"Netzwerk-Diagramm als draw.io-Datei"})]}),"\n",(0,s.jsx)(n.h3,{id:"12-beschreibung-der-beiden-windows-vms",children:"1.2 Beschreibung der beiden Windows-VMs"}),"\n",(0,s.jsx)(n.h4,{id:"121-login",children:"1.2.1 Login"}),"\n",(0,s.jsx)(n.p,{children:"Die Anmeldung an den zwei Windows-VMs ist automatisiert. Dies wird durch eine Konfiguration in der Windows-Registry erm\xf6glicht."}),"\n",(0,s.jsx)(n.p,{children:'Die automatische Anmeldung erm\xf6glicht den direkten Zugriff auf das Benutzerkonto ohne manuelle Eingabe von Benutzername und Passwort. In unserem Fall sind sowohl der Benutzername als auch das Passwort auf "vagrant" gesetzt.'}),"\n",(0,s.jsxs)(n.p,{children:['Registry-Pfad: "Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon"',(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{alt:"Autologin Registry",src:i(99299).Z+"",width:"708",height:"291"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"AutoAdminLogon      1\nDefaultPassword     vagrant\nDefaultUserName     vagrant\n"})}),"\n",(0,s.jsx)(n.h4,{id:"122-installierte-dienste-welche-software-wurde-auf-der-vm-installiert",children:'1.2.2 Installierte Dienste ("Welche Software wurde auf der VM installiert?")'}),"\n",(0,s.jsx)(n.p,{children:"Domain Controller:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Software Domain Controller",src:i(11682).Z+"",width:"1125",height:"634"})}),"\n",(0,s.jsx)(n.p,{children:"Windows 10 Client:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Software Windows 10 Client",src:i(54201).Z+"",width:"1125",height:"634"})}),"\n",(0,s.jsx)(n.h4,{id:"123-zugriffe-auf-die-applikationen-wie-greife-ich-auf-die-verschiedenen-softwaren-zu",children:'1.2.3 Zugriffe auf die Applikationen ("Wie greife ich auf die verschiedenen Softwaren zu?")'}),"\n",(0,s.jsx)(n.p,{children:"Auf beiden Windows VMs kann die Software per integrierte Windows Suche ge\xf6ffnet werden. Jede Software hat eine GUI."}),"\n",(0,s.jsx)(n.h3,{id:"13-beschreibung-der-elk-vm",children:"1.3 Beschreibung der ELK-VM"}),"\n",(0,s.jsx)(n.h4,{id:"131-login",children:"1.3.1 Login"}),"\n",(0,s.jsx)(n.p,{children:"Auf die ELK-VM (Elasticsearch, Logstash, Kibana) wird per SSH zugegriffen."}),"\n",(0,s.jsx)(n.p,{children:"Um per SSH auf die VM zuzugreifen, muss im Terminal folgender Befehl eingeben werden:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ssh",children:"ssh vagrant@192.168.56.105\n"})}),"\n",(0,s.jsx)(n.p,{children:"Bei der ersten Verbindung muss der Authentifizierungsschl\xfcssel (Fingerprint) akzeptiert werden. Anschliessend muss das Passwort des Benutzers eingegeben werden."}),"\n",(0,s.jsx)(n.h4,{id:"132-installierte-dienste-welche-software-wurde-auf-der-vm-installiert",children:'1.3.2 Installierte Dienste ("Welche Software wurde auf der VM installiert?")'}),"\n",(0,s.jsxs)(n.p,{children:["Um eine \xdcbersicht \xfcber die installierte Software zu erhalten, kann der Befehl ",(0,s.jsx)(n.code,{children:"apt list --installed"})," genutzt werden."]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"/appendix/M182/apt_installed",children:"Output installierte Software"})}),"\n",(0,s.jsx)(n.p,{children:"Wichtig f\xfcr uns sind:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"elasticsearch/stable,now 7.17.14 amd64 [installed]\nkibana/stable,now 7.17.14 amd64 [installed]\nfilebeat/stable,now 7.17.14 amd64 [installed]\nauditbeat/stable,now 7.17.14 amd64 [installed]\nelasticsearch-curator/unknown,now 5.8.4 amd64 [installed]\n"})}),"\n",(0,s.jsx)(n.h4,{id:"133-zugriffe-auf-die-applikationen-wie-greife-ich-auf-die-verschiedenen-softwaren-zu",children:'1.3.3 Zugriffe auf die Applikationen ("Wie greife ich auf die verschiedenen Softwaren zu?")'}),"\n",(0,s.jsx)(n.p,{children:"Die meisten Softwares k\xf6nnen direkt \xfcber die Konsole genutzt werden. Es gibt auch Dienste welche gestartet werden k\xf6nnen und dann \xfcber ein Webinterface genutzt werden."}),"\n",(0,s.jsx)(n.p,{children:"Zugriff auf ELK-Komponenten:"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"http://192.168.56.105:5601",children:"http://192.168.56.105:5601"})," Kibana - Credentials: ",(0,s.jsx)(n.code,{children:"vagrant:vagrant"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.a,{href:"https://192.168.56.105:8412",children:"https://192.168.56.105:8412"})," Fleet - Credentials: ",(0,s.jsx)(n.code,{children:"admin@detectionlab.network:Fl33tpassword!"})]}),"\n",(0,s.jsx)(n.h2,{id:"2-infrastruktur-setup",children:"2 Infrastruktur-Setup"}),"\n",(0,s.jsx)(n.h3,{id:"21-sinn-und-zweck-des-vagrantfile",children:"2.1 Sinn und Zweck des Vagrantfile"}),"\n",(0,s.jsxs)(n.p,{children:["Ein Vagrantfile ist eine Konfiguration f\xfcr ",(0,s.jsx)(n.a,{href:"https://www.vagrantup.com/",children:"Vagrant"}),", ein Tool zum Erstellen und Verwalten von virtuellen Maschinen in einem Workflow. Es definiert wie die VM aufgesetzt wird. Dazu geh\xf6ren das Basis-Image (Box genannt), die Netzwerkkonfiguration, CPU und Speicher Zuweisungen sowie die Konfiguration von Shared Folders."]}),"\n",(0,s.jsx)(n.h3,{id:"22-sinn-und-zweck-provisioning-befehle",children:"2.2 Sinn und Zweck Provisioning-Befehle"}),"\n",(0,s.jsx)(n.p,{children:"Provisioning-Befehle dienen dazu, nach der Erstellung der VM, automatisch sie zu konfigurieren. Dies kann die Installation von Software, das Ausf\xfchren von Skripten oder das Anwenden von Einstellungen. Durch diese Befehle k\xf6nnen die Maschinen immer konsistent gleich eingerichtet werden und dies automatisiert."}),"\n",(0,s.jsx)(n.h3,{id:"23-liste-aller-scripts-f\xfcr-die-windows-images-die-bei-einer-installation-ausgef\xfchrt-werden",children:"2.3 Liste aller Scripts f\xfcr die Windows-Images die bei einer Installation ausgef\xfchrt werden"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"bginfo-simple.bgi\nbginfo-workshop.bgi\nbginfo.bgi\nconfigure-AuditingPolicyGPOs.ps1\nconfigure-disable-windows-defender-gpo.ps1\nconfigure-ou.ps1\nconfigure-powershelllogging.ps1\nconfigure-pslogstranscriptsshare.ps1\nconfigure-rdp-user-gpo.ps1\nconfigure-wef-gpo.ps1\ncreate-domain.ps1\ndownload_palantir_osquery.ps1\ndownload_palantir_wef.ps1\nenable-winrm.ps1\nfix-second-network.ps1\nfix-windows-expiration.ps1\ninstall-autorunstowineventlog.ps1\ninstall-bginfo.ps1\ninstall-choco-extras.ps1\ninstall-inputsconf.ps1\ninstall-microsoft-ata.ps1\ninstall-osquery.ps1\ninstall-redteam.ps1\ninstall-splunkuf.ps1\ninstall-sysinternals.ps1\ninstall-utilities.ps1\ninstall-velociraptor.ps1\ninstall-wefsubscriptions.ps1\ninstall-windows_ta.ps1\ninstall-winlogbeat.ps1\njoin-domain.ps1\nMakeWindows10GreatAgain.ps1\nMakeWindows10GreatAgain.reg\nprovision.ps1\n"})}),"\n",(0,s.jsx)(n.h3,{id:"24-beschreibung-des-bootstrapsh-files-f\xfcr-das-aufsetzen-der-logger-vm",children:"2.4 Beschreibung des bootstrap.sh-Files f\xfcr das Aufsetzen der Logger-VM"}),"\n",(0,s.jsxs)(n.p,{children:["Das ",(0,s.jsx)(n.a,{href:"/appendix/M182/bootstrap_sh",children:"bootstrap.sh"}),"-File ist ein Shell-Skript, dass beim Aufsetzen einer Linux VM ausgef\xfchrt wird. Es werden Repositories und Dependencies geladen und installiert. Auch werden direkt alle Pakete auf dem System aktualisiert. Anschliessend werden noch einige Dienste konfiguriert und gestartet."]}),"\n",(0,s.jsx)(n.h3,{id:"25-beschreibung-des-elksh-files-f\xfcr-das-aufsetzen-der-logger-vm",children:"2.5 Beschreibung des ELK.sh-Files f\xfcr das Aufsetzen der Logger-VM"}),"\n",(0,s.jsxs)(n.p,{children:["Das ",(0,s.jsx)(n.a,{href:"/appendix/M182/ELK_sh",children:"ELK.sh"}),"-File ist eine Erweiterung des ",(0,s.jsx)(n.code,{children:"bootstrap.sh"}),"-File, welches spezifisch f\xfcr den Einsatz des ELK-Stacks (Elasticsearch, Logstash, Kibana) eingesetzt wird. Es beinhaltet die zu installierenden Software Pakete."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"Quellen:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://developer.hashicorp.com/vagrant/docs/vagrantfile",children:"Vagrantfile"})})]})}function c(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},47373:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/files/M182_LAB-1c57450d253fc8d348ff506523c3acd9.drawio"},7228:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/files/auftrag01-2ded08970010e60161d4316b73fd95fc.pdf"},300:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/M182_LAB.drawio-7f4d06b925c6ee76b4a8ace277089e24.svg"},99299:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/autologin_regedit-327900eff479b320a4563e7555cba1c8.png"},54201:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/software_client-cc14a733c767f90349e4dc1b034eb0ea.png"},11682:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/software_dc-4ec4b13e0c4b42c5326802727e4afbd5.png"},11151:(e,n,i)=>{i.d(n,{Z:()=>d,a:()=>a});var s=i(67294);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);